

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Footnotes &mdash; FEC-2017 1.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="FEC-2017 1.0 documentation" href="index.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> FEC-2017
          

          
            
            <img src="_static/logo_hy_geo_135.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Basics of Python</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Day1-Intro.html">Introduction to the course</a></li>
<li class="toctree-l1"><a class="reference internal" href="Day1-Getting-started-with-python.html">Getting started with Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="Day1-working-environment.html">Working environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="Day1-Data-types.html">Basic data types in Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="Day1-string-operations.html">String-operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="Day1-Strings-mini-exercise.html">Task: Hello world!</a></li>
<li class="toctree-l1"><a class="reference internal" href="Day1-writing-scripts.html">Writing your own Python scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="Day1-intro-to-GitHub.html">Introduction to Version Control and GitHub</a></li>
<li class="toctree-l1"><a class="reference internal" href="Day1-create-GitHub-account.html">Create a GitHub-account</a></li>
<li class="toctree-l1"><a class="reference internal" href="Day1-Exercise1.html">Exercise 1: Lists</a></li>
</ul>
<p class="caption"><span class="caption-text">Automating ArcGIS-processes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Day3-arcpy-overview.html">Automating ArcGIS-processes</a></li>
<li class="toctree-l1"><a class="reference internal" href="Day3-arcpy.html">ArcPy-module</a></li>
<li class="toctree-l1"><a class="reference internal" href="Day3-Exercise4-ArcPy.html">Exercise 4: ArcPy-script for processing species data</a></li>
<li class="toctree-l1"><a class="reference internal" href="Day3-toolbox.html">ArcGIS Toolbox</a></li>
<li class="toctree-l1"><a class="reference internal" href="Day3-arcpy-script.html">Writing arcpy scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="Day3-run-the-tool.html">Running the Python script from ArcGIS</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">FEC-2017</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Footnotes</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/Day3-useful-functions.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <blockquote>
<div>Useful functions related to filepaths</div></blockquote>
<hr class="docutils" />
<p>When dealing with file paths in Python there are several useful
functions available in a sub-module called
<strong>`os.path &lt;https://docs.python.org/3/library/os.path.html&gt;`__</strong>.</p>
<p>For instance when creating output filepaths it is common that you have a
common folder where all the output files will be created. In such cases,
you need to combine the path to the folder and the output filename for
each output file that you produce, os-module can help with such an
operation.</p>
<ol class="arabic simple">
<li>It is possible to parse the filename of a file (without folder
information):</li>
</ol>
<p><code class="docutils literal"><span class="pre">python</span>&#160; <span class="pre">&gt;&gt;&gt;</span> <span class="pre">import</span> <span class="pre">os</span>&#160; <span class="pre">&gt;&gt;&gt;</span> <span class="pre">filename</span> <span class="pre">=</span> <span class="pre">os.path.basename(&quot;/home/geo/data/test.txt&quot;)</span>&#160; <span class="pre">&gt;&gt;&gt;</span> <span class="pre">print(filename)</span>&#160; <span class="pre">test.txt</span></code></p>
<ol class="arabic simple" start="2">
<li>One typical example that you might need to do sometime is to copy a
part of file into a new file in another folder. Let&#8217;s create a new
folder called <strong>*Results*</strong> to the home -folder of our computer
instance using specific command called <code class="docutils literal"><span class="pre">os.makedirs()</span></code> but ONLY if
it does not exist already (we can take advantage of
<code class="docutils literal"><span class="pre">os.path.exists()</span></code> -function):</li>
</ol>
<p>```python &gt;&gt;&gt; import os &gt;&gt;&gt; result_dir = &#8220;/home/geo/Results&#8221;</p>
<p># Check if folder does NOT exist &gt;&gt;&gt; if not os.path.exists(result_dir):
# If folder didn&#8217;t exist create one os.makedirs(result_dir) ```</p>
<p>Now we have a new folder called Results in our home folder:</p>
<div class="figure" id="id1">
<img alt="New folder created" src="../img/result-folder.PNG" />
<p class="caption"><span class="caption-text">New folder created</span></p>
</div>
<ol class="arabic simple" start="3">
<li>Now we can combine the filename (test.txt) and our new folder using
<code class="docutils literal"><span class="pre">os.path.join()</span></code> -function:</li>
</ol>
<p><code class="docutils literal"><span class="pre">python</span>&#160; <span class="pre">&gt;&gt;&gt;</span> <span class="pre">new_output_file</span> <span class="pre">=</span> <span class="pre">os.path.join(result_dir,</span> <span class="pre">filename)</span>&#160; <span class="pre">&gt;&gt;&gt;</span> <span class="pre">print(new_output_file)</span>&#160; <span class="pre">/home/geo/Results/test.txt</span></code></p>
<blockquote>
<div>Copying selected lines of (multiple) files into a new location</div></blockquote>
<hr class="docutils" />
<ol class="arabic simple">
<li>Let&#8217;s take our previous exercise (reading multiple files) as a
starting point and copy the first line of each inflammation csv-file
and save them into new files using the same filenames but located
into our new Results folder. We will use <code class="docutils literal"><span class="pre">os.path.basename()</span></code>
-function to find out the filename of the input files and
<code class="docutils literal"><span class="pre">os.path.join()</span></code> -function to create the new output filepaths that
will be saved into the new Results folder:</li>
</ol>
<p>```python &gt;&gt;&gt; import glob # List inflammation data files from the
source directory &gt;&gt;&gt; source_dir = &#8220;/home/geo/data&#8221; &gt;&gt;&gt;
inflammation_paths = glob.glob(source_dir + &#8220;/inflammation*.csv&#8221;)</p>
<p># As a reminder our result directory &gt;&gt;&gt; result_dir =
&#8220;/home/geo/Results&#8221;</p>
<p># Iterate over the files &gt;&gt;&gt; for fp in inflammation_paths: # Parse the
filename of the input file and print it as information for the user
filename = os.path.basename(fp) print(filename)</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="c1"># Open the source file in read mode</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="c1"># Parse the output file name, combine the result_dir folder-path and the filename of the input file</span>
    <span class="n">output_fp</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">result_dir</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>

    <span class="c1"># Open and create the output file in write mode</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">output_fp</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">w</span><span class="p">:</span>

       <span class="c1"># Read the first line of the source file</span>
       <span class="n">first_line</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>

       <span class="c1"># Write it to the output file</span>
       <span class="n">w</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">first_line</span><span class="p">)</span>
</pre></div>
</div>
<p>Now we have copied the inflammation files in our Results -folder:</p>
<div class="figure" id="id2">
<img alt="Results" src="../img/copy-files-1-line.PNG" />
<p class="caption"><span class="caption-text">Results</span></p>
</div>
<p>And each of those files have the first line as content:</p>
<div class="figure" id="id3">
<img alt="Results" src="../img/copy-files-1-line-content.PNG" />
<p class="caption"><span class="caption-text">Results</span></p>
</div>
<div class="section" id="footnotes">
<h1>Footnotes<a class="headerlink" href="#footnotes" title="Permalink to this headline">Â¶</a></h1>
<ul class="simple">
<li>[0]: When reading / writing in Python, it is best to use the <code class="docutils literal"><span class="pre">with</span></code>
-statement as it takes care of closing your file after you have
read/written something into your file. <em>Closing</em> the file takes care
of saving the data into that file. If the file is not closed after
writing something into it, the contents won&#8217;t be saved into that
file. It is similar idea than when thinking of writing something into
a Word template document but without saving it anywhere. You can find
more info about how to write data without <code class="docutils literal"><span class="pre">with</span></code> -statement, and
how to close files from
<strong>`here &lt;https://docs.python.org/3/tutorial/inputoutput.html#reading-and-writing-files&gt;`__</strong>.</li>
</ul>
</div>


           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Digital Geography Lab.
      Last updated on Mar 01, 2017.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>